{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/workspace/blast_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useLocalState}from'../util/UseLocalStorage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useLocalState=useLocalState(\"\",\"jwt\"),_useLocalState2=_slicedToArray(_useLocalState,2),jwt=_useLocalState2[0],setJwt=_useLocalState2[1];function sendLoginRequest(){var reqBody={username:username,password:password};fetch('api/auth/login',{headers:{\"Content-Type\":\"application/json\"},method:\"post\",body:JSON.stringify(reqBody)}).then(function(response){if(response.status===200)Promise.all([response.json(),response.headers]);else return Promise.reject(\"Invalid login attempt\");}).then(function(_ref){var _ref2=_slicedToArray(_ref,2),body=_ref2[0],headers=_ref2[1];setJwt(headers.get(\"Authorization\"));window.location.href=\"dashboard\";}).catch(function(message){alert(message);});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"username\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"submit\",type:\"button\",onClick:function onClick(){return sendLoginRequest();},children:\"Login\"})})]});};export default Login;","map":{"version":3,"names":["React","useState","useLocalState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useLocalState","_useLocalState2","jwt","setJwt","sendLoginRequest","reqBody","fetch","headers","method","body","JSON","stringify","then","response","status","Promise","all","json","reject","_ref","_ref2","get","window","location","href","catch","message","alert","children","htmlFor","type","id","value","onChange","event","target","onClick"],"sources":["/Users/admin/Desktop/workspace/blast_frontend/src/Login/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocalState } from '../util/UseLocalStorage';\n\nconst Login = () => {\n\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const [jwt, setJwt] = useLocalState(\"\",\"jwt\");\n\n    function sendLoginRequest() {\n            const reqBody = {\n                username : username,\n                password : password\n            }\n        \n            fetch('api/auth/login', {\n                headers : {\n                \"Content-Type\" : \"application/json\" \n                },\n                method : \"post\",\n                body : JSON.stringify(reqBody),\n            })\n            .then((response) => {\n                if(response.status === 200)\n                    Promise.all( [response.json(), response.headers]);\n                else\n                    return Promise.reject(\"Invalid login attempt\")\n            })\n            .then(([body, headers]) => {\n                setJwt(headers.get(\"Authorization\"));\n                window.location.href = \"dashboard\";\n            })\n            .catch((message) => {\n                alert(message);\n            });\n        } \n\n    return (\n        <>\n            <div>\n                <label htmlFor=\"username\">Username</label>\n                <input type=\"email\" id=\"username\" value={username} onChange={(event) => setUsername(event.target.value)} />\n            </div>\n            <div>\n                <label htmlFor=\"password\">Password</label>\n                <input type=\"password\" id=\"password\" value={password} onChange={(event) => setPassword(event.target.value)} />\n            </div>\n            <div>\n                <button id=\"submit\" type=\"button\" onClick={() =>  sendLoginRequest()}>\n                    Login\n                </button>\n            </div>\n        </>\n    );\n};\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}